<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Who Pays? - × ×™×”×•×œ ×—×•×‘×•×ª</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase compat v10 -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<style>
body { font-family: 'Assistant', sans-serif; background-color:#0f172a; color:#f8fafc; }
.glass-card { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,0.1);}
.input-focus:focus { outline:none; border-color:#10b981; box-shadow:0 0 0 2px rgba(16,185,129,0.2);}
.author { position:fixed; bottom:0; left:0; right:0; text-align:center; padding:10px; font-size:11px; color:#64748b; background: rgba(15,23,42,0.85); backdrop-filter: blur(8px); border-top:1px solid rgba(255,255,255,0.06); letter-spacing:0.03em;}
</style>
</head>

<body class="min-h-screen p-4 md:p-8">
<div class="max-w-md mx-auto" id="app">

  <!-- Header -->
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-bold text-emerald-400 mb-2">Who Pays?</h1>
    <p class="text-slate-400">× ×™×”×•×œ ×”×œ×•×•××•×ª ×•×—×•×‘×•×ª ×‘×™×Ÿ ×—×‘×¨×™×</p>
    <div id="auth-container" class="mt-4 space-y-2">
      <button id="loginBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl flex items-center justify-center gap-2 hidden">
        ×”×ª×—×‘×¨×•×ª ×¢× Google
      </button>
      <div id="user-info" class="hidden text-center text-slate-300 py-2">
        <span id="user-email" class="block text-sm mb-2"></span>
        <button id="logoutBtn" class="text-xs bg-rose-600 hover:bg-rose-700 text-white py-1 px-3 rounded">×”×ª× ×ª×§×•×ª</button>
      </div>
    </div>
  </header>

  <!-- Stats Grid -->
  <div class="grid grid-cols-2 gap-4 mb-8">
    <div class="glass-card p-4 rounded-2xl text-center">
      <span class="block text-xs text-slate-400 uppercase tracking-wider mb-1">×—×™×™×‘×™× ×œ×™</span>
      <span id="total-owed-to-me" class="text-2xl font-bold text-emerald-400">â‚ª0</span>
    </div>
    <div class="glass-card p-4 rounded-2xl text-center">
      <span class="block text-xs text-slate-400 uppercase tracking-wider mb-1">×× ×™ ×—×™×™×‘</span>
      <span id="total-i-owe" class="text-2xl font-bold text-rose-400">â‚ª0</span>
    </div>
  </div>

  <!-- Add New Debt Form -->
  <div class="glass-card p-6 rounded-3xl mb-8">
    <h2 class="text-lg font-semibold mb-4 text-slate-200">×”×•×¡×¤×ª ×ª× ×•×¢×” ×—×“×©×”</h2>
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-2">
        <button id="btn-type-plus" onclick="setDebtType('plus')" class="py-2 rounded-xl font-bold border-2 border-emerald-500 bg-emerald-500/20 text-emerald-400 transition-all">×—×™×™×‘×™× ×œ×™ (+)</button>
        <button id="btn-type-minus" onclick="setDebtType('minus')" class="py-2 rounded-xl font-bold border-2 border-transparent bg-slate-800 text-slate-400 transition-all">×× ×™ ×—×™×™×‘ (-)</button>
      </div>
      <input type="text" id="name" placeholder="×©× ×”×—×‘×¨" class="w-full bg-slate-800 border border-slate-700 rounded-xl p-3 input-focus">
      <input type="number" id="amount" placeholder="×¡×›×•× (â‚ª)" class="w-full bg-slate-800 border border-slate-700 rounded-xl p-3 input-focus">
      <input type="text" id="reason" placeholder="×¢×‘×•×¨ ××”? (×¤×™×¦×”, ×§×¤×”, ×˜×™×•×œ...)" class="w-full bg-slate-800 border border-slate-700 rounded-xl p-3 input-focus">
      <button onclick="addDebt()" class="w-full bg-emerald-500 hover:bg-emerald-600 text-slate-950 font-bold py-3 rounded-xl transition-all transform active:scale-95 shadow-lg shadow-emerald-500/20">×©××™×¨×”</button>
    </div>
  </div>

  <!-- Debt List -->
  <div>
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold">×¨×©×™××ª ×—×•×‘×•×ª</h2>
      <button onclick="clearAll()" class="text-xs text-slate-500 hover:text-rose-400 transition-colors">× ×§×” ×”×›×œ</button>
    </div>
    <div id="debt-list" class="space-y-3"></div>
  </div>

  <!-- Open Popup Button -->
  <div class="text-center mt-8">
    <button id="openPopupBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-xl">×¤×ª×— ×¤×•×¤××¤</button>
  </div>

</div>

<footer class="author">
  <span>Â© Who Pays? â€” Designed by Yair ğŸ‘‘</span>
</footer>

<!-- Renderer JS -->
<script src="./renderer.js"></script>
</body>
</html>